{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminCategories=()=>{const[categories,setCategories]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[successMessage,setSuccessMessage]=useState(null);const[showCreateForm,setShowCreateForm]=useState(false);const[selectedCategory,setSelectedCategory]=useState(null);const[showEditForm,setShowEditForm]=useState(false);const[formData,setFormData]=useState({name:'',description:'',icon:'',color:'#3B82F6',sort_order:0,is_active:true});const availableColors=[{name:'Синий',value:'#3B82F6'},{name:'Зелёный',value:'#10B981'},{name:'Красный',value:'#EF4444'},{name:'Жёлтый',value:'#F59E0B'},{name:'Фиолетовый',value:'#8B5CF6'},{name:'Розовый',value:'#EC4899'},{name:'Индиго',value:'#6366F1'},{name:'Бирюзовый',value:'#06B6D4'},{name:'Оранжевый',value:'#F97316'},{name:'Серый',value:'#6B7280'}];const popularIcons=['👥','💼','🎯','💡','🔧','📊','🌟','🤝','🎨','⚡','🎪','📈','🔍','💪','🏆','🎭','🎬','🎨','🎪','🎯'];useEffect(()=>{loadCategories();},[]);const loadCategories=async()=>{try{setLoading(true);const response=await api.get('/categories');// Получим количество вопросов для каждой категории\nconst categoriesWithCounts=await Promise.all(response.data.map(async category=>{try{const questionsResponse=await api.get(`/questions?category_id=${category.id}`);return{...category,question_count:questionsResponse.data.length};}catch{return{...category,question_count:0};}}));setCategories(categoriesWithCounts.sort((a,b)=>a.sort_order-b.sort_order));}catch(error){console.error('Ошибка загрузки категорий:',error);setError('Не удалось загрузить категории');}finally{setLoading(false);}};const handleCreateCategory=async e=>{e.preventDefault();try{const response=await api.post('/categories',formData);if(response.data.success){setSuccessMessage('Категория создана');setShowCreateForm(false);resetForm();loadCategories();}else{setError(response.data.error||'Ошибка создания категории');}}catch(error){var _error$response,_error$response$data;console.error('Ошибка создания категории:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Ошибка создания категории');}};const handleUpdateCategory=async e=>{e.preventDefault();if(!selectedCategory)return;try{const response=await api.put(`/categories/${selectedCategory.id}`,formData);if(response.data.success){setSuccessMessage('Категория обновлена');setShowEditForm(false);setSelectedCategory(null);resetForm();loadCategories();}else{setError(response.data.error||'Ошибка обновления категории');}}catch(error){var _error$response2,_error$response2$data;console.error('Ошибка обновления категории:',error);setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Ошибка обновления категории');}};const handleDeleteCategory=async categoryId=>{const category=categories.find(c=>c.id===categoryId);if(!category)return;if(category.question_count&&category.question_count>0){setError('Нельзя удалить категорию, в которой есть вопросы');return;}if(!confirm('Вы уверены, что хотите удалить эту категорию?')){return;}try{await api.delete(`/categories/${categoryId}`);setSuccessMessage('Категория удалена');loadCategories();}catch(error){var _error$response3,_error$response3$data;console.error('Ошибка удаления категории:',error);setError(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Ошибка удаления категории');}};const handleToggleActive=async categoryId=>{const category=categories.find(c=>c.id===categoryId);if(!category)return;try{await api.patch(`/categories/${categoryId}/toggle-active`,{is_active:!category.is_active});setSuccessMessage(category.is_active?'Категория деактивирована':'Категория активирована');loadCategories();}catch(error){var _error$response4,_error$response4$data;console.error('Ошибка изменения статуса категории:',error);setError(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Ошибка изменения статуса категории');}};const handleReorder=async(categoryId,direction)=>{const currentIndex=categories.findIndex(c=>c.id===categoryId);if(currentIndex===-1)return;const newIndex=direction==='up'?currentIndex-1:currentIndex+1;if(newIndex<0||newIndex>=categories.length)return;try{const reorderedCategories=[...categories];const[moved]=reorderedCategories.splice(currentIndex,1);reorderedCategories.splice(newIndex,0,moved);// Обновляем sort_order для всех затронутых категорий\nconst updates=reorderedCategories.map((category,index)=>({id:category.id,sort_order:index}));await api.patch('/categories/reorder',{categories:updates});setSuccessMessage('Порядок категорий обновлен');loadCategories();}catch(error){var _error$response5,_error$response5$data;console.error('Ошибка изменения порядка категорий:',error);setError(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||'Ошибка изменения порядка категорий');}};const openEditForm=category=>{setSelectedCategory(category);setFormData({name:category.name,description:category.description,icon:category.icon,color:category.color,sort_order:category.sort_order,is_active:category.is_active});setShowEditForm(true);};const resetForm=()=>{setFormData({name:'',description:'',icon:'',color:'#3B82F6',sort_order:categories.length,is_active:true});};const openCreateForm=()=>{resetForm();setShowCreateForm(true);};// Очистка сообщений через 5 секунд\nuseEffect(()=>{if(successMessage||error){const timer=setTimeout(()=>{setSuccessMessage(null);setError(null);},5000);return()=>clearTimeout(timer);}},[successMessage,error]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:flex md:items-center md:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold leading-7 text-gray-900 dark:text-white sm:text-3xl sm:truncate\",children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\\u043C\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500 dark:text-gray-400\",children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0438 \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u044F\\u0439\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\\u043C\\u0438 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u043E\\u0432 \\u0434\\u043B\\u044F \\u043E\\u0446\\u0435\\u043D\\u043A\\u0438\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex md:mt-0 md:ml-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:openCreateForm,className:\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"})})]}),successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded\",children:successMessage}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-md\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-gray-200 dark:divide-gray-700\",children:categories.map((category,index)=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 sm:px-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 mr-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-12 w-12 rounded-lg flex items-center justify-center text-white text-xl\",style:{backgroundColor:category.color},children:category.icon})}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:category.name}),!category.is_active&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800\",children:\"\\u041D\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:category.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-400 dark:text-gray-500 mt-1\",children:[\"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441\\u043E\\u0432: \",category.question_count||0]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleReorder(category.id,'up'),disabled:index===0,className:`p-1 rounded text-xs ${index===0?'text-gray-300 cursor-not-allowed':'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200'}`,children:\"\\u2191\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleReorder(category.id,'down'),disabled:index===categories.length-1,className:`p-1 rounded text-xs ${index===categories.length-1?'text-gray-300 cursor-not-allowed':'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200'}`,children:\"\\u2193\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEditForm(category),className:\"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300\",children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleToggleActive(category.id),className:`${category.is_active?'text-yellow-600 hover:text-yellow-900':'text-green-600 hover:text-green-900'}`,children:category.is_active?'Деактивировать':'Активировать'}),(!category.question_count||category.question_count===0)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteCategory(category.id),className:\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\",children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]})})},category.id))})}),(showCreateForm||showEditForm)&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-white mb-4\",children:showCreateForm?'Создать категорию':'Редактировать категорию'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:showCreateForm?handleCreateCategory:handleUpdateCategory,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.name,onChange:e=>setFormData({...formData,name:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.description,onChange:e=>setFormData({...formData,description:e.target.value}),rows:3,className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.icon,onChange:e=>setFormData({...formData,icon:e.target.value}),className:\"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u044D\\u043C\\u043E\\u0434\\u0437\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl\",children:formData.icon})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-10 gap-2\",children:popularIcons.map((icon,index)=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setFormData({...formData,icon}),className:\"text-xl p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500\",children:icon},index))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"\\u0426\\u0432\\u0435\\u0442\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-5 gap-2\",children:availableColors.map(color=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setFormData({...formData,color:color.value}),className:`w-8 h-8 rounded-full border-2 ${formData.color===color.value?'border-gray-400 ring-2 ring-gray-200':'border-gray-300'}`,style:{backgroundColor:color.value},title:color.name},color.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"is_active\",type:\"checkbox\",checked:formData.is_active,onChange:e=>setFormData({...formData,is_active:e.target.checked}),className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"is_active\",className:\"ml-2 block text-sm text-gray-900 dark:text-white\",children:\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowCreateForm(false);setShowEditForm(false);setSelectedCategory(null);},className:\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:showCreateForm?'Создать':'Сохранить'})]})]})]})})]});};export default AdminCategories;","map":{"version":3,"names":["React","useState","useEffect","api","jsx","_jsx","jsxs","_jsxs","AdminCategories","categories","setCategories","loading","setLoading","error","setError","successMessage","setSuccessMessage","showCreateForm","setShowCreateForm","selectedCategory","setSelectedCategory","showEditForm","setShowEditForm","formData","setFormData","name","description","icon","color","sort_order","is_active","availableColors","value","popularIcons","loadCategories","response","get","categoriesWithCounts","Promise","all","data","map","category","questionsResponse","id","question_count","length","sort","a","b","console","handleCreateCategory","e","preventDefault","post","success","resetForm","_error$response","_error$response$data","handleUpdateCategory","put","_error$response2","_error$response2$data","handleDeleteCategory","categoryId","find","c","confirm","delete","_error$response3","_error$response3$data","handleToggleActive","patch","_error$response4","_error$response4$data","handleReorder","direction","currentIndex","findIndex","newIndex","reorderedCategories","moved","splice","updates","index","_error$response5","_error$response5$data","openEditForm","openCreateForm","timer","setTimeout","clearTimeout","className","children","onClick","style","backgroundColor","disabled","onSubmit","type","onChange","target","required","rows","placeholder","title","checked","htmlFor"],"sources":["/Users/chastnik/Documents/projects/360/frontend/src/pages/admin/AdminCategories.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../../services/api';\n\ninterface Category {\n  id: number;\n  name: string;\n  description: string;\n  icon: string;\n  color: string;\n  sort_order: number;\n  is_active: boolean;\n  created_at: string;\n  updated_at: string;\n  question_count?: number;\n}\n\ninterface CategoryFormData {\n  name: string;\n  description: string;\n  icon: string;\n  color: string;\n  sort_order: number;\n  is_active: boolean;\n}\n\nconst AdminCategories: React.FC = () => {\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [selectedCategory, setSelectedCategory] = useState<Category | null>(null);\n  const [showEditForm, setShowEditForm] = useState(false);\n\n  const [formData, setFormData] = useState<CategoryFormData>({\n    name: '',\n    description: '',\n    icon: '',\n    color: '#3B82F6',\n    sort_order: 0,\n    is_active: true\n  });\n\n  const availableColors = [\n    { name: 'Синий', value: '#3B82F6' },\n    { name: 'Зелёный', value: '#10B981' },\n    { name: 'Красный', value: '#EF4444' },\n    { name: 'Жёлтый', value: '#F59E0B' },\n    { name: 'Фиолетовый', value: '#8B5CF6' },\n    { name: 'Розовый', value: '#EC4899' },\n    { name: 'Индиго', value: '#6366F1' },\n    { name: 'Бирюзовый', value: '#06B6D4' },\n    { name: 'Оранжевый', value: '#F97316' },\n    { name: 'Серый', value: '#6B7280' }\n  ];\n\n  const popularIcons = [\n    '👥', '💼', '🎯', '💡', '🔧', '📊', '🌟', '🤝', '🎨', '⚡',\n    '🎪', '📈', '🔍', '💪', '🏆', '🎭', '🎬', '🎨', '🎪', '🎯'\n  ];\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/categories');\n      \n      // Получим количество вопросов для каждой категории\n      const categoriesWithCounts = await Promise.all(\n        response.data.map(async (category: Category) => {\n          try {\n            const questionsResponse = await api.get(`/questions?category_id=${category.id}`);\n            return {\n              ...category,\n              question_count: questionsResponse.data.length\n            };\n          } catch {\n            return {\n              ...category,\n              question_count: 0\n            };\n          }\n        })\n      );\n      \n      setCategories(categoriesWithCounts.sort((a, b) => a.sort_order - b.sort_order));\n    } catch (error) {\n      console.error('Ошибка загрузки категорий:', error);\n      setError('Не удалось загрузить категории');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateCategory = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await api.post('/categories', formData);\n      \n      if (response.data.success) {\n        setSuccessMessage('Категория создана');\n        setShowCreateForm(false);\n        resetForm();\n        loadCategories();\n      } else {\n        setError(response.data.error || 'Ошибка создания категории');\n      }\n    } catch (error: any) {\n      console.error('Ошибка создания категории:', error);\n      setError(error.response?.data?.error || 'Ошибка создания категории');\n    }\n  };\n\n  const handleUpdateCategory = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!selectedCategory) return;\n\n    try {\n      const response = await api.put(`/categories/${selectedCategory.id}`, formData);\n      \n      if (response.data.success) {\n        setSuccessMessage('Категория обновлена');\n        setShowEditForm(false);\n        setSelectedCategory(null);\n        resetForm();\n        loadCategories();\n      } else {\n        setError(response.data.error || 'Ошибка обновления категории');\n      }\n    } catch (error: any) {\n      console.error('Ошибка обновления категории:', error);\n      setError(error.response?.data?.error || 'Ошибка обновления категории');\n    }\n  };\n\n  const handleDeleteCategory = async (categoryId: number) => {\n    const category = categories.find(c => c.id === categoryId);\n    if (!category) return;\n\n    if (category.question_count && category.question_count > 0) {\n      setError('Нельзя удалить категорию, в которой есть вопросы');\n      return;\n    }\n\n    if (!confirm('Вы уверены, что хотите удалить эту категорию?')) {\n      return;\n    }\n\n    try {\n      await api.delete(`/categories/${categoryId}`);\n      setSuccessMessage('Категория удалена');\n      loadCategories();\n    } catch (error: any) {\n      console.error('Ошибка удаления категории:', error);\n      setError(error.response?.data?.error || 'Ошибка удаления категории');\n    }\n  };\n\n  const handleToggleActive = async (categoryId: number) => {\n    const category = categories.find(c => c.id === categoryId);\n    if (!category) return;\n\n    try {\n      await api.patch(`/categories/${categoryId}/toggle-active`, {\n        is_active: !category.is_active\n      });\n      setSuccessMessage(category.is_active ? 'Категория деактивирована' : 'Категория активирована');\n      loadCategories();\n    } catch (error: any) {\n      console.error('Ошибка изменения статуса категории:', error);\n      setError(error.response?.data?.error || 'Ошибка изменения статуса категории');\n    }\n  };\n\n  const handleReorder = async (categoryId: number, direction: 'up' | 'down') => {\n    const currentIndex = categories.findIndex(c => c.id === categoryId);\n    if (currentIndex === -1) return;\n\n    const newIndex = direction === 'up' ? currentIndex - 1 : currentIndex + 1;\n    if (newIndex < 0 || newIndex >= categories.length) return;\n\n    try {\n      const reorderedCategories = [...categories];\n      const [moved] = reorderedCategories.splice(currentIndex, 1);\n      reorderedCategories.splice(newIndex, 0, moved);\n\n      // Обновляем sort_order для всех затронутых категорий\n      const updates = reorderedCategories.map((category, index) => ({\n        id: category.id,\n        sort_order: index\n      }));\n\n      await api.patch('/categories/reorder', { categories: updates });\n      setSuccessMessage('Порядок категорий обновлен');\n      loadCategories();\n    } catch (error: any) {\n      console.error('Ошибка изменения порядка категорий:', error);\n      setError(error.response?.data?.error || 'Ошибка изменения порядка категорий');\n    }\n  };\n\n  const openEditForm = (category: Category) => {\n    setSelectedCategory(category);\n    setFormData({\n      name: category.name,\n      description: category.description,\n      icon: category.icon,\n      color: category.color,\n      sort_order: category.sort_order,\n      is_active: category.is_active\n    });\n    setShowEditForm(true);\n  };\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      icon: '',\n      color: '#3B82F6',\n      sort_order: categories.length,\n      is_active: true\n    });\n  };\n\n  const openCreateForm = () => {\n    resetForm();\n    setShowCreateForm(true);\n  };\n\n  // Очистка сообщений через 5 секунд\n  useEffect(() => {\n    if (successMessage || error) {\n      const timer = setTimeout(() => {\n        setSuccessMessage(null);\n        setError(null);\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [successMessage, error]);\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Заголовок */}\n      <div className=\"md:flex md:items-center md:justify-between\">\n        <div className=\"flex-1 min-w-0\">\n          <h1 className=\"text-2xl font-bold leading-7 text-gray-900 dark:text-white sm:text-3xl sm:truncate\">\n            Управление категориями\n          </h1>\n          <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n            Создавайте и управляйте категориями вопросов для оценки\n          </p>\n        </div>\n        <div className=\"mt-4 flex md:mt-0 md:ml-4\">\n          <button\n            onClick={openCreateForm}\n            className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n          >\n            Добавить категорию\n          </button>\n        </div>\n      </div>\n\n      {/* Сообщения */}\n      {successMessage && (\n        <div className=\"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded\">\n          {successMessage}\n        </div>\n      )}\n\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">\n          {error}\n        </div>\n      )}\n\n      {/* Список категорий */}\n      <div className=\"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-md\">\n        <ul className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n          {categories.map((category, index) => (\n            <li key={category.id}>\n              <div className=\"px-4 py-4 sm:px-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center\">\n                    <div className=\"flex-shrink-0 mr-4\">\n                      <div \n                        className=\"h-12 w-12 rounded-lg flex items-center justify-center text-white text-xl\"\n                        style={{ backgroundColor: category.color }}\n                      >\n                        {category.icon}\n                      </div>\n                    </div>\n                    <div className=\"min-w-0 flex-1\">\n                      <div className=\"flex items-center\">\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                          {category.name}\n                        </p>\n                        {!category.is_active && (\n                          <span className=\"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800\">\n                            Неактивна\n                          </span>\n                        )}\n                      </div>\n                      <div className=\"mt-1\">\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                          {category.description}\n                        </p>\n                        <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                          Вопросов: {category.question_count || 0}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    {/* Кнопки изменения порядка */}\n                    <div className=\"flex flex-col space-y-1\">\n                      <button\n                        onClick={() => handleReorder(category.id, 'up')}\n                        disabled={index === 0}\n                        className={`p-1 rounded text-xs ${\n                          index === 0 \n                            ? 'text-gray-300 cursor-not-allowed' \n                            : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200'\n                        }`}\n                      >\n                        ↑\n                      </button>\n                      <button\n                        onClick={() => handleReorder(category.id, 'down')}\n                        disabled={index === categories.length - 1}\n                        className={`p-1 rounded text-xs ${\n                          index === categories.length - 1 \n                            ? 'text-gray-300 cursor-not-allowed' \n                            : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200'\n                        }`}\n                      >\n                        ↓\n                      </button>\n                    </div>\n                    \n                    <button\n                      onClick={() => openEditForm(category)}\n                      className=\"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300\"\n                    >\n                      Редактировать\n                    </button>\n                    \n                    <button\n                      onClick={() => handleToggleActive(category.id)}\n                      className={`${\n                        category.is_active \n                          ? 'text-yellow-600 hover:text-yellow-900' \n                          : 'text-green-600 hover:text-green-900'\n                      }`}\n                    >\n                      {category.is_active ? 'Деактивировать' : 'Активировать'}\n                    </button>\n                    \n                    {(!category.question_count || category.question_count === 0) && (\n                      <button\n                        onClick={() => handleDeleteCategory(category.id)}\n                        className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\"\n                      >\n                        Удалить\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </li>\n          ))}\n        </ul>\n      </div>\n\n      {/* Модальное окно для создания/редактирования */}\n      {(showCreateForm || showEditForm) && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n              {showCreateForm ? 'Создать категорию' : 'Редактировать категорию'}\n            </h3>\n            \n            <form onSubmit={showCreateForm ? handleCreateCategory : handleUpdateCategory} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Название *\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.name}\n                  onChange={(e) => setFormData({...formData, name: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Описание\n                </label>\n                <textarea\n                  value={formData.description}\n                  onChange={(e) => setFormData({...formData, description: e.target.value})}\n                  rows={3}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Иконка\n                </label>\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <input\n                    type=\"text\"\n                    value={formData.icon}\n                    onChange={(e) => setFormData({...formData, icon: e.target.value})}\n                    className=\"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\n                    placeholder=\"Введите эмодзи\"\n                  />\n                  <div className=\"text-2xl\">{formData.icon}</div>\n                </div>\n                <div className=\"grid grid-cols-10 gap-2\">\n                  {popularIcons.map((icon, index) => (\n                    <button\n                      key={index}\n                      type=\"button\"\n                      onClick={() => setFormData({...formData, icon})}\n                      className=\"text-xl p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500\"\n                    >\n                      {icon}\n                    </button>\n                  ))}\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Цвет\n                </label>\n                <div className=\"grid grid-cols-5 gap-2\">\n                  {availableColors.map((color) => (\n                    <button\n                      key={color.value}\n                      type=\"button\"\n                      onClick={() => setFormData({...formData, color: color.value})}\n                      className={`w-8 h-8 rounded-full border-2 ${\n                        formData.color === color.value \n                          ? 'border-gray-400 ring-2 ring-gray-200' \n                          : 'border-gray-300'\n                      }`}\n                      style={{ backgroundColor: color.value }}\n                      title={color.name}\n                    />\n                  ))}\n                </div>\n              </div>\n              \n              <div className=\"flex items-center\">\n                <input\n                  id=\"is_active\"\n                  type=\"checkbox\"\n                  checked={formData.is_active}\n                  onChange={(e) => setFormData({...formData, is_active: e.target.checked})}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                />\n                <label htmlFor=\"is_active\" className=\"ml-2 block text-sm text-gray-900 dark:text-white\">\n                  Активна\n                </label>\n              </div>\n              \n              <div className=\"flex justify-end space-x-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowCreateForm(false);\n                    setShowEditForm(false);\n                    setSelectedCategory(null);\n                  }}\n                  className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n                >\n                  Отмена\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n                >\n                  {showCreateForm ? 'Создать' : 'Сохранить'}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminCategories; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}