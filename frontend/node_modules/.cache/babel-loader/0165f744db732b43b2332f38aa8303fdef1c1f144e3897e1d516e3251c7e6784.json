{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import{Layout}from'../components/Layout';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const SurveyPage=()=>{const{respondentId}=useParams();const navigate=useNavigate();const[questions,setQuestions]=useState([]);const[assessmentInfo,setAssessmentInfo]=useState(null);const[progress,setProgress]=useState(null);const[currentCategoryId,setCurrentCategoryId]=useState(null);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[error,setError]=useState(null);const[showConfirmDialog,setShowConfirmDialog]=useState(false);const loadSurveyData=useCallback(async()=>{try{setLoading(true);const[questionsResponse,progressResponse]=await Promise.all([api.get(`/assessments/${respondentId}/questions`),api.get(`/assessments/${respondentId}/progress`)]);setQuestions(questionsResponse.data);setProgress(progressResponse.data.progress);setAssessmentInfo(progressResponse.data.respondent);// Установить первую категорию как текущую\nif(questionsResponse.data.length>0){setCurrentCategoryId(questionsResponse.data[0].category_id);}}catch(error){console.error('Ошибка при загрузке данных опроса:',error);setError('Не удалось загрузить данные опроса');}finally{setLoading(false);}},[respondentId]);useEffect(()=>{if(respondentId){loadSurveyData();}},[respondentId,loadSurveyData]);const handleScoreChange=async(questionId,score)=>{try{setSaving(true);await api.post(`/assessments/${respondentId}/responses`,{question_id:questionId,score:score});// Обновить локальное состояние\nsetQuestions(prev=>prev.map(q=>q.id===questionId?{...q,response:score}:q));// Обновить прогресс\nawait loadProgress();}catch(error){console.error('Ошибка при сохранении ответа:',error);setError('Не удалось сохранить ответ');}finally{setSaving(false);}};const loadProgress=async()=>{try{const response=await api.get(`/assessments/${respondentId}/progress`);setProgress(response.data.progress);}catch(error){console.error('Ошибка при загрузке прогресса:',error);}};const handleComplete=async()=>{try{setSaving(true);await api.post(`/assessments/${respondentId}/complete`);navigate('/assessments',{state:{message:'Опрос успешно завершен!'}});}catch(error){var _error$response,_error$response$data;console.error('Ошибка при завершении опроса:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Не удалось завершить опрос');}finally{setSaving(false);setShowConfirmDialog(false);}};const getScoreColor=score=>{if(score<=2)return'text-red-600';if(score<=3)return'text-yellow-600';if(score<=4)return'text-blue-600';return'text-green-600';};const getScoreText=score=>{const texts={1:'Очень плохо',2:'Плохо',3:'Удовлетворительно',4:'Хорошо',5:'Отлично'};return texts[score];};const filteredQuestions=questions.filter(q=>q.category_id===currentCategoryId);const categories=questions.reduce((acc,q)=>{if(!acc.find(c=>c.id===q.category_id)){acc.push({id:q.category_id,name:q.category_name,color:q.category_color});}return acc;},[]);const isCompleted=(progress===null||progress===void 0?void 0:progress.percentage)===100;if(loading){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"})})});}if(error){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\",children:error})});}return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-2\",children:[\"\\u041E\\u0446\\u0435\\u043D\\u043A\\u0430: \",assessmentInfo===null||assessmentInfo===void 0?void 0:assessmentInfo.participant_name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300 mb-4\",children:assessmentInfo===null||assessmentInfo===void 0?void 0:assessmentInfo.cycle_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-300\",children:[\"\\u041F\\u0440\\u043E\\u0433\\u0440\\u0435\\u0441\\u0441: \",progress===null||progress===void 0?void 0:progress.answeredQuestions,\" \\u0438\\u0437 \",progress===null||progress===void 0?void 0:progress.totalQuestions]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-primary-600 dark:text-primary-400\",children:[progress===null||progress===void 0?void 0:progress.percentage,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-primary-600 h-2 rounded-full transition-all duration-300\",style:{width:`${progress===null||progress===void 0?void 0:progress.percentage}%`}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 mb-4\",children:categories.map(category=>{const categoryProgress=progress===null||progress===void 0?void 0:progress.categories.find(c=>c.id===category.id);const isCompleted=(categoryProgress===null||categoryProgress===void 0?void 0:categoryProgress.total_questions)===(categoryProgress===null||categoryProgress===void 0?void 0:categoryProgress.answered_questions);return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentCategoryId(category.id),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${currentCategoryId===category.id?'bg-primary-600 text-white':'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'}`,children:[category.name,isCompleted&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 text-green-500\",children:\"\\u2713\"})]},category.id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:filteredQuestions.map((question,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-gray-200 dark:border-gray-700 pb-6 last:border-b-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-white\",children:[index+1,\". \",question.text]}),question.response&&/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded text-sm font-medium ${getScoreColor(question.response)}`,children:getScoreText(question.response)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-5 gap-3\",children:[1,2,3,4,5].map(score=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleScoreChange(question.id,score),disabled:saving,className:`p-3 rounded-lg border-2 transition-all ${question.response===score?'border-primary-600 bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400':'border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300'} ${saving?'opacity-50 cursor-not-allowed':''}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold mb-1\",children:score}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs\",children:getScoreText(score)})]})},score))})]},question.id))})}),isCompleted&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowConfirmDialog(true),disabled:saving,className:\"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium transition-colors disabled:opacity-50\",children:saving?'Завершение...':'Завершить опрос'})}),showConfirmDialog&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-white mb-4\",children:\"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C \\u043E\\u043F\\u0440\\u043E\\u0441?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300 mb-6\",children:\"\\u041F\\u043E\\u0441\\u043B\\u0435 \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043D\\u0438\\u044F \\u043E\\u043F\\u0440\\u043E\\u0441\\u0430 \\u0432\\u044B \\u043D\\u0435 \\u0441\\u043C\\u043E\\u0436\\u0435\\u0442\\u0435 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0441\\u0432\\u043E\\u0438 \\u043E\\u0442\\u0432\\u0435\\u0442\\u044B.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowConfirmDialog(false),className:\"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100\",children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleComplete,disabled:saving,className:\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50\",children:saving?'Завершение...':'Завершить'})]})]})})]})});};","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","Layout","api","jsx","_jsx","jsxs","_jsxs","SurveyPage","respondentId","navigate","questions","setQuestions","assessmentInfo","setAssessmentInfo","progress","setProgress","currentCategoryId","setCurrentCategoryId","loading","setLoading","saving","setSaving","error","setError","showConfirmDialog","setShowConfirmDialog","loadSurveyData","questionsResponse","progressResponse","Promise","all","get","data","respondent","length","category_id","console","handleScoreChange","questionId","score","post","question_id","prev","map","q","id","response","loadProgress","handleComplete","state","message","_error$response","_error$response$data","getScoreColor","getScoreText","texts","filteredQuestions","filter","categories","reduce","acc","find","c","push","name","category_name","color","category_color","isCompleted","percentage","children","className","participant_name","cycle_name","answeredQuestions","totalQuestions","style","width","category","categoryProgress","total_questions","answered_questions","onClick","question","index","text","disabled"],"sources":["/Users/chastnik/Documents/projects/360/frontend/src/pages/SurveyPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Layout } from '../components/Layout';\nimport api from '../services/api';\n\ninterface Question {\n  id: number;\n  text: string;\n  category_id: number;\n  category_name: string;\n  category_color: string;\n  order: number;\n  response: number | null;\n}\n\ninterface Progress {\n  totalQuestions: number;\n  answeredQuestions: number;\n  percentage: number;\n  categories: {\n    id: number;\n    name: string;\n    color: string;\n    total_questions: number;\n    answered_questions: number;\n  }[];\n}\n\ninterface AssessmentInfo {\n  id: number;\n  participant_name: string;\n  cycle_name: string;\n  cycle_description: string;\n  end_date: string;\n  status: string;\n}\n\nexport const SurveyPage: React.FC = () => {\n  const { respondentId } = useParams<{ respondentId: string }>();\n  const navigate = useNavigate();\n  \n  const [questions, setQuestions] = useState<Question[]>([]);\n  const [assessmentInfo, setAssessmentInfo] = useState<AssessmentInfo | null>(null);\n  const [progress, setProgress] = useState<Progress | null>(null);\n  const [currentCategoryId, setCurrentCategoryId] = useState<number | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n\n  const loadSurveyData = useCallback(async () => {\n    try {\n      setLoading(true);\n      const [questionsResponse, progressResponse] = await Promise.all([\n        api.get(`/assessments/${respondentId}/questions`),\n        api.get(`/assessments/${respondentId}/progress`)\n      ]);\n\n      setQuestions(questionsResponse.data);\n      setProgress(progressResponse.data.progress);\n      setAssessmentInfo(progressResponse.data.respondent);\n      \n      // Установить первую категорию как текущую\n      if (questionsResponse.data.length > 0) {\n        setCurrentCategoryId(questionsResponse.data[0].category_id);\n      }\n    } catch (error) {\n      console.error('Ошибка при загрузке данных опроса:', error);\n      setError('Не удалось загрузить данные опроса');\n    } finally {\n      setLoading(false);\n    }\n  }, [respondentId]);\n\n  useEffect(() => {\n    if (respondentId) {\n      loadSurveyData();\n    }\n  }, [respondentId, loadSurveyData]);\n\n  const handleScoreChange = async (questionId: number, score: number) => {\n    try {\n      setSaving(true);\n      await api.post(`/assessments/${respondentId}/responses`, {\n        question_id: questionId,\n        score: score\n      });\n\n      // Обновить локальное состояние\n      setQuestions(prev => \n        prev.map(q => \n          q.id === questionId ? { ...q, response: score } : q\n        )\n      );\n\n      // Обновить прогресс\n      await loadProgress();\n    } catch (error) {\n      console.error('Ошибка при сохранении ответа:', error);\n      setError('Не удалось сохранить ответ');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const loadProgress = async () => {\n    try {\n      const response = await api.get(`/assessments/${respondentId}/progress`);\n      setProgress(response.data.progress);\n    } catch (error) {\n      console.error('Ошибка при загрузке прогресса:', error);\n    }\n  };\n\n  const handleComplete = async () => {\n    try {\n      setSaving(true);\n      await api.post(`/assessments/${respondentId}/complete`);\n      navigate('/assessments', { \n        state: { message: 'Опрос успешно завершен!' } \n      });\n    } catch (error: any) {\n      console.error('Ошибка при завершении опроса:', error);\n      setError(error.response?.data?.error || 'Не удалось завершить опрос');\n    } finally {\n      setSaving(false);\n      setShowConfirmDialog(false);\n    }\n  };\n\n  const getScoreColor = (score: number) => {\n    if (score <= 2) return 'text-red-600';\n    if (score <= 3) return 'text-yellow-600';\n    if (score <= 4) return 'text-blue-600';\n    return 'text-green-600';\n  };\n\n  const getScoreText = (score: number) => {\n    const texts = {\n      1: 'Очень плохо',\n      2: 'Плохо',\n      3: 'Удовлетворительно',\n      4: 'Хорошо',\n      5: 'Отлично'\n    };\n    return texts[score as keyof typeof texts];\n  };\n\n  const filteredQuestions = questions.filter(q => q.category_id === currentCategoryId);\n  const categories = questions.reduce((acc, q) => {\n    if (!acc.find(c => c.id === q.category_id)) {\n      acc.push({\n        id: q.category_id,\n        name: q.category_name,\n        color: q.category_color\n      });\n    }\n    return acc;\n  }, [] as { id: number; name: string; color: string }[]);\n\n  const isCompleted = progress?.percentage === 100;\n\n  if (loading) {\n    return (\n      <Layout>\n        <div className=\"flex justify-center items-center h-64\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n        </div>\n      </Layout>\n    );\n  }\n\n  if (error) {\n    return (\n      <Layout>\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">\n          {error}\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Заголовок */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6\">\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n            Оценка: {assessmentInfo?.participant_name}\n          </h1>\n          <p className=\"text-gray-600 dark:text-gray-300 mb-4\">\n            {assessmentInfo?.cycle_name}\n          </p>\n          \n          {/* Прогресс */}\n          <div className=\"mb-4\">\n            <div className=\"flex justify-between items-center mb-2\">\n              <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                Прогресс: {progress?.answeredQuestions} из {progress?.totalQuestions}\n              </span>\n              <span className=\"text-sm font-medium text-primary-600 dark:text-primary-400\">\n                {progress?.percentage}%\n              </span>\n            </div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div \n                className=\"bg-primary-600 h-2 rounded-full transition-all duration-300\"\n                style={{ width: `${progress?.percentage}%` }}\n              ></div>\n            </div>\n          </div>\n\n          {/* Категории */}\n          <div className=\"flex flex-wrap gap-2 mb-4\">\n            {categories.map(category => {\n              const categoryProgress = progress?.categories.find(c => c.id === category.id);\n              const isCompleted = categoryProgress?.total_questions === categoryProgress?.answered_questions;\n              \n              return (\n                <button\n                  key={category.id}\n                  onClick={() => setCurrentCategoryId(category.id)}\n                  className={`px-3 py-1 rounded-full text-sm font-medium transition-colors ${\n                    currentCategoryId === category.id\n                      ? 'bg-primary-600 text-white'\n                      : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n                  }`}\n                >\n                  {category.name}\n                  {isCompleted && (\n                    <span className=\"ml-1 text-green-500\">✓</span>\n                  )}\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Вопросы */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"space-y-6\">\n            {filteredQuestions.map((question, index) => (\n              <div key={question.id} className=\"border-b border-gray-200 dark:border-gray-700 pb-6 last:border-b-0\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                    {index + 1}. {question.text}\n                  </h3>\n                  {question.response && (\n                    <span className={`px-2 py-1 rounded text-sm font-medium ${getScoreColor(question.response)}`}>\n                      {getScoreText(question.response)}\n                    </span>\n                  )}\n                </div>\n                \n                <div className=\"grid grid-cols-5 gap-3\">\n                  {[1, 2, 3, 4, 5].map(score => (\n                    <button\n                      key={score}\n                      onClick={() => handleScoreChange(question.id, score)}\n                      disabled={saving}\n                      className={`p-3 rounded-lg border-2 transition-all ${\n                        question.response === score\n                          ? 'border-primary-600 bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400'\n                          : 'border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300'\n                      } ${saving ? 'opacity-50 cursor-not-allowed' : ''}`}\n                    >\n                      <div className=\"text-center\">\n                        <div className=\"text-2xl font-bold mb-1\">{score}</div>\n                        <div className=\"text-xs\">{getScoreText(score)}</div>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Кнопка завершения */}\n        {isCompleted && (\n          <div className=\"mt-6 text-center\">\n            <button\n              onClick={() => setShowConfirmDialog(true)}\n              disabled={saving}\n              className=\"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium transition-colors disabled:opacity-50\"\n            >\n              {saving ? 'Завершение...' : 'Завершить опрос'}\n            </button>\n          </div>\n        )}\n\n        {/* Диалог подтверждения */}\n        {showConfirmDialog && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\">\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                Завершить опрос?\n              </h3>\n              <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\n                После завершения опроса вы не сможете изменить свои ответы.\n              </p>\n              <div className=\"flex justify-end space-x-3\">\n                <button\n                  onClick={() => setShowConfirmDialog(false)}\n                  className=\"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100\"\n                >\n                  Отмена\n                </button>\n                <button\n                  onClick={handleComplete}\n                  disabled={saving}\n                  className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50\"\n                >\n                  {saving ? 'Завершение...' : 'Завершить'}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </Layout>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}