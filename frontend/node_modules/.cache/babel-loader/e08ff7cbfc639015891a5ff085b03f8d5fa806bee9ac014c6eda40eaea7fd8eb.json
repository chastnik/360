{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminUsers=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[showCreateForm,setShowCreateForm]=useState(false);const[selectedUser,setSelectedUser]=useState(null);const[showEditForm,setShowEditForm]=useState(false);const[successMessage,setSuccessMessage]=useState(null);const[formData,setFormData]=useState({email:'',first_name:'',last_name:'',middle_name:'',role:'user',position:'',department:'',manager_id:'',mattermost_username:''});useEffect(()=>{loadUsers();},[]);const loadUsers=async()=>{try{setLoading(true);const response=await api.get('/users');setUsers(response.data);}catch(error){console.error('Ошибка загрузки пользователей:',error);setError('Не удалось загрузить пользователей');}finally{setLoading(false);}};const handleCreateUser=async e=>{e.preventDefault();try{const userData={...formData,manager_id:formData.manager_id?parseInt(formData.manager_id):undefined};const response=await api.post('/auth/register',userData);if(response.data.success){setSuccessMessage(`Пользователь создан. Временный пароль: ${response.data.temporary_password}`);setShowCreateForm(false);setFormData({email:'',first_name:'',last_name:'',middle_name:'',role:'user',position:'',department:'',manager_id:'',mattermost_username:''});loadUsers();}else{setError(response.data.error||'Ошибка создания пользователя');}}catch(error){var _error$response,_error$response$data;console.error('Ошибка создания пользователя:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Ошибка создания пользователя');}};const handleUpdateUser=async e=>{e.preventDefault();if(!selectedUser)return;try{const userData={...formData,manager_id:formData.manager_id?parseInt(formData.manager_id):undefined};const response=await api.put(`/users/${selectedUser.id}`,userData);if(response.data.success){setSuccessMessage('Пользователь обновлен');setShowEditForm(false);setSelectedUser(null);loadUsers();}else{setError(response.data.error||'Ошибка обновления пользователя');}}catch(error){var _error$response2,_error$response2$data;console.error('Ошибка обновления пользователя:',error);setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Ошибка обновления пользователя');}};const handleDeactivateUser=async userId=>{if(!confirm('Вы уверены, что хотите деактивировать этого пользователя?')){return;}try{await api.patch(`/users/${userId}/deactivate`);setSuccessMessage('Пользователь деактивирован');loadUsers();}catch(error){var _error$response3,_error$response3$data;console.error('Ошибка деактивации пользователя:',error);setError(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Ошибка деактивации пользователя');}};const handleActivateUser=async userId=>{try{await api.patch(`/users/${userId}/activate`);setSuccessMessage('Пользователь активирован');loadUsers();}catch(error){var _error$response4,_error$response4$data;console.error('Ошибка активации пользователя:',error);setError(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Ошибка активации пользователя');}};const openEditForm=user=>{var _user$manager_id;setSelectedUser(user);setFormData({email:user.email,first_name:user.first_name,last_name:user.last_name,middle_name:user.middle_name||'',role:user.role,position:user.position||'',department:user.department||'',manager_id:((_user$manager_id=user.manager_id)===null||_user$manager_id===void 0?void 0:_user$manager_id.toString())||'',mattermost_username:user.mattermost_username||''});setShowEditForm(true);};const filteredUsers=users.filter(user=>{var _user$position,_user$department;return user.first_name.toLowerCase().includes(searchTerm.toLowerCase())||user.last_name.toLowerCase().includes(searchTerm.toLowerCase())||user.email.toLowerCase().includes(searchTerm.toLowerCase())||((_user$position=user.position)===null||_user$position===void 0?void 0:_user$position.toLowerCase().includes(searchTerm.toLowerCase()))||((_user$department=user.department)===null||_user$department===void 0?void 0:_user$department.toLowerCase().includes(searchTerm.toLowerCase()));});const getRoleText=role=>{switch(role){case'admin':return'Администратор';case'hr':return'HR';case'user':return'Пользователь';default:return role;}};const getRoleColor=role=>{switch(role){case'admin':return'bg-red-100 text-red-800';case'hr':return'bg-blue-100 text-blue-800';case'user':return'bg-green-100 text-green-800';default:return'bg-gray-100 text-gray-800';}};// Очистка сообщений через 5 секунд\nuseEffect(()=>{if(successMessage||error){const timer=setTimeout(()=>{setSuccessMessage(null);setError(null);},5000);return()=>clearTimeout(timer);}},[successMessage,error]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:flex md:items-center md:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold leading-7 text-gray-900 dark:text-white sm:text-3xl sm:truncate\",children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\\u043C\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500 dark:text-gray-400\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u044F\\u0439\\u0442\\u0435, \\u0440\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u0443\\u0439\\u0442\\u0435 \\u0438 \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u044F\\u0439\\u0442\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\\u043C\\u0438 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u044B\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex md:mt-0 md:ml-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreateForm(true),className:\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"})})]}),successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded\",children:successMessage}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"search\",className:\"sr-only\",children:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-gray-400\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"input\",{id:\"search\",name:\"search\",className:\"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm\",placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439...\",type:\"search\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-md\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-gray-200 dark:divide-gray-700\",children:filteredUsers.map(user=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 sm:px-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-primary-700 dark:text-primary-300\",children:[user.first_name[0],user.last_name[0]]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:[user.first_name,\" \",user.last_name]}),/*#__PURE__*/_jsx(\"span\",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${getRoleColor(user.role)}`,children:getRoleText(user.role)}),!user.is_active&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800\",children:\"\\u041D\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u0435\\u043D\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 flex items-center text-sm text-gray-500 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(\"p\",{children:user.email}),user.position&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"mx-2\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"p\",{children:user.position})]}),user.department&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"mx-2\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"p\",{children:user.department})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEditForm(user),className:\"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300\",children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),user.is_active?/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeactivateUser(user.id),className:\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\",children:\"\\u0414\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleActivateUser(user.id),className:\"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300\",children:\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})]})]})})},user.id))})}),(showCreateForm||showEditForm)&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-white mb-4\",children:showCreateForm?'Создать пользователя':'Редактировать пользователя'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:showCreateForm?handleCreateUser:handleUpdateUser,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"\\u0418\\u043C\\u044F *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.first_name,onChange:e=>setFormData({...formData,first_name:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.last_name,onChange:e=>setFormData({...formData,last_name:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"\\u041E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.middle_name,onChange:e=>setFormData({...formData,middle_name:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:formData.email,onChange:e=>setFormData({...formData,email:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"\\u0420\\u043E\\u043B\\u044C *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.role,onChange:e=>setFormData({...formData,role:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hr\",children:\"HR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"\\u0414\\u043E\\u043B\\u0436\\u043D\\u043E\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.position,onChange:e=>setFormData({...formData,position:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"\\u041E\\u0442\\u0434\\u0435\\u043B\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.department,onChange:e=>setFormData({...formData,department:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Mattermost username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.mattermost_username,onChange:e=>setFormData({...formData,mattermost_username:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\",placeholder:\"@username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowCreateForm(false);setShowEditForm(false);setSelectedUser(null);},className:\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:showCreateForm?'Создать':'Сохранить'})]})]})]})})]});};export default AdminUsers;","map":{"version":3,"names":["React","useState","useEffect","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminUsers","users","setUsers","loading","setLoading","error","setError","searchTerm","setSearchTerm","showCreateForm","setShowCreateForm","selectedUser","setSelectedUser","showEditForm","setShowEditForm","successMessage","setSuccessMessage","formData","setFormData","email","first_name","last_name","middle_name","role","position","department","manager_id","mattermost_username","loadUsers","response","get","data","console","handleCreateUser","e","preventDefault","userData","parseInt","undefined","post","success","temporary_password","_error$response","_error$response$data","handleUpdateUser","put","id","_error$response2","_error$response2$data","handleDeactivateUser","userId","confirm","patch","_error$response3","_error$response3$data","handleActivateUser","_error$response4","_error$response4$data","openEditForm","user","_user$manager_id","toString","filteredUsers","filter","_user$position","_user$department","toLowerCase","includes","getRoleText","getRoleColor","timer","setTimeout","clearTimeout","className","children","onClick","htmlFor","fill","viewBox","fillRule","d","clipRule","name","placeholder","type","value","onChange","target","map","is_active","onSubmit","required"],"sources":["/Users/chastnik/Documents/projects/360/frontend/src/pages/admin/AdminUsers.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../../services/api';\n\ninterface User {\n  id: number;\n  email: string;\n  first_name: string;\n  last_name: string;\n  middle_name?: string;\n  role: 'admin' | 'hr' | 'user';\n  position?: string;\n  department?: string;\n  manager_id?: number;\n  mattermost_username?: string;\n  is_active: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface UserFormData {\n  email: string;\n  first_name: string;\n  last_name: string;\n  middle_name: string;\n  role: 'admin' | 'hr' | 'user';\n  position: string;\n  department: string;\n  manager_id: string;\n  mattermost_username: string;\n}\n\nconst AdminUsers: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [showEditForm, setShowEditForm] = useState(false);\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n\n  const [formData, setFormData] = useState<UserFormData>({\n    email: '',\n    first_name: '',\n    last_name: '',\n    middle_name: '',\n    role: 'user',\n    position: '',\n    department: '',\n    manager_id: '',\n    mattermost_username: ''\n  });\n\n  useEffect(() => {\n    loadUsers();\n  }, []);\n\n  const loadUsers = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/users');\n      setUsers(response.data);\n    } catch (error) {\n      console.error('Ошибка загрузки пользователей:', error);\n      setError('Не удалось загрузить пользователей');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const userData = {\n        ...formData,\n        manager_id: formData.manager_id ? parseInt(formData.manager_id) : undefined\n      };\n      \n      const response = await api.post('/auth/register', userData);\n      \n      if (response.data.success) {\n        setSuccessMessage(`Пользователь создан. Временный пароль: ${response.data.temporary_password}`);\n        setShowCreateForm(false);\n        setFormData({\n          email: '',\n          first_name: '',\n          last_name: '',\n          middle_name: '',\n          role: 'user',\n          position: '',\n          department: '',\n          manager_id: '',\n          mattermost_username: ''\n        });\n        loadUsers();\n      } else {\n        setError(response.data.error || 'Ошибка создания пользователя');\n      }\n    } catch (error: any) {\n      console.error('Ошибка создания пользователя:', error);\n      setError(error.response?.data?.error || 'Ошибка создания пользователя');\n    }\n  };\n\n  const handleUpdateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!selectedUser) return;\n\n    try {\n      const userData = {\n        ...formData,\n        manager_id: formData.manager_id ? parseInt(formData.manager_id) : undefined\n      };\n      \n      const response = await api.put(`/users/${selectedUser.id}`, userData);\n      \n      if (response.data.success) {\n        setSuccessMessage('Пользователь обновлен');\n        setShowEditForm(false);\n        setSelectedUser(null);\n        loadUsers();\n      } else {\n        setError(response.data.error || 'Ошибка обновления пользователя');\n      }\n    } catch (error: any) {\n      console.error('Ошибка обновления пользователя:', error);\n      setError(error.response?.data?.error || 'Ошибка обновления пользователя');\n    }\n  };\n\n  const handleDeactivateUser = async (userId: number) => {\n    if (!confirm('Вы уверены, что хотите деактивировать этого пользователя?')) {\n      return;\n    }\n\n    try {\n      await api.patch(`/users/${userId}/deactivate`);\n      setSuccessMessage('Пользователь деактивирован');\n      loadUsers();\n    } catch (error: any) {\n      console.error('Ошибка деактивации пользователя:', error);\n      setError(error.response?.data?.error || 'Ошибка деактивации пользователя');\n    }\n  };\n\n  const handleActivateUser = async (userId: number) => {\n    try {\n      await api.patch(`/users/${userId}/activate`);\n      setSuccessMessage('Пользователь активирован');\n      loadUsers();\n    } catch (error: any) {\n      console.error('Ошибка активации пользователя:', error);\n      setError(error.response?.data?.error || 'Ошибка активации пользователя');\n    }\n  };\n\n  const openEditForm = (user: User) => {\n    setSelectedUser(user);\n    setFormData({\n      email: user.email,\n      first_name: user.first_name,\n      last_name: user.last_name,\n      middle_name: user.middle_name || '',\n      role: user.role,\n      position: user.position || '',\n      department: user.department || '',\n      manager_id: user.manager_id?.toString() || '',\n      mattermost_username: user.mattermost_username || ''\n    });\n    setShowEditForm(true);\n  };\n\n  const filteredUsers = users.filter(user =>\n    user.first_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.last_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.position?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.department?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const getRoleText = (role: string) => {\n    switch (role) {\n      case 'admin': return 'Администратор';\n      case 'hr': return 'HR';\n      case 'user': return 'Пользователь';\n      default: return role;\n    }\n  };\n\n  const getRoleColor = (role: string) => {\n    switch (role) {\n      case 'admin': return 'bg-red-100 text-red-800';\n      case 'hr': return 'bg-blue-100 text-blue-800';\n      case 'user': return 'bg-green-100 text-green-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // Очистка сообщений через 5 секунд\n  useEffect(() => {\n    if (successMessage || error) {\n      const timer = setTimeout(() => {\n        setSuccessMessage(null);\n        setError(null);\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [successMessage, error]);\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Заголовок */}\n      <div className=\"md:flex md:items-center md:justify-between\">\n        <div className=\"flex-1 min-w-0\">\n          <h1 className=\"text-2xl font-bold leading-7 text-gray-900 dark:text-white sm:text-3xl sm:truncate\">\n            Управление пользователями\n          </h1>\n          <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n            Добавляйте, редактируйте и управляйте пользователями системы\n          </p>\n        </div>\n        <div className=\"mt-4 flex md:mt-0 md:ml-4\">\n          <button\n            onClick={() => setShowCreateForm(true)}\n            className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n          >\n            Добавить пользователя\n          </button>\n        </div>\n      </div>\n\n      {/* Сообщения */}\n      {successMessage && (\n        <div className=\"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded\">\n          {successMessage}\n        </div>\n      )}\n\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">\n          {error}\n        </div>\n      )}\n\n      {/* Поиск */}\n      <div className=\"max-w-md\">\n        <label htmlFor=\"search\" className=\"sr-only\">\n          Поиск пользователей\n        </label>\n        <div className=\"relative\">\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            <svg className=\"h-5 w-5 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\" clipRule=\"evenodd\" />\n            </svg>\n          </div>\n          <input\n            id=\"search\"\n            name=\"search\"\n            className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm\"\n            placeholder=\"Поиск пользователей...\"\n            type=\"search\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </div>\n      </div>\n\n      {/* Таблица пользователей */}\n      <div className=\"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-md\">\n        <ul className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n          {filteredUsers.map((user) => (\n            <li key={user.id}>\n              <div className=\"px-4 py-4 sm:px-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"h-10 w-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center\">\n                        <span className=\"text-sm font-medium text-primary-700 dark:text-primary-300\">\n                          {user.first_name[0]}{user.last_name[0]}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"ml-4\">\n                      <div className=\"flex items-center\">\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                          {user.first_name} {user.last_name}\n                        </p>\n                        <span className={`ml-2 px-2 py-1 text-xs font-medium rounded-full ${getRoleColor(user.role)}`}>\n                          {getRoleText(user.role)}\n                        </span>\n                        {!user.is_active && (\n                          <span className=\"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800\">\n                            Неактивен\n                          </span>\n                        )}\n                      </div>\n                      <div className=\"mt-1 flex items-center text-sm text-gray-500 dark:text-gray-400\">\n                        <p>{user.email}</p>\n                        {user.position && (\n                          <>\n                            <span className=\"mx-2\">•</span>\n                            <p>{user.position}</p>\n                          </>\n                        )}\n                        {user.department && (\n                          <>\n                            <span className=\"mx-2\">•</span>\n                            <p>{user.department}</p>\n                          </>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <button\n                      onClick={() => openEditForm(user)}\n                      className=\"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300\"\n                    >\n                      Редактировать\n                    </button>\n                    {user.is_active ? (\n                      <button\n                        onClick={() => handleDeactivateUser(user.id)}\n                        className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\"\n                      >\n                        Деактивировать\n                      </button>\n                    ) : (\n                      <button\n                        onClick={() => handleActivateUser(user.id)}\n                        className=\"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300\"\n                      >\n                        Активировать\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </li>\n          ))}\n        </ul>\n      </div>\n\n      {/* Модальные окна */}\n      {(showCreateForm || showEditForm) && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto\">\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n              {showCreateForm ? 'Создать пользователя' : 'Редактировать пользователя'}\n            </h3>\n            \n            <form onSubmit={showCreateForm ? handleCreateUser : handleUpdateUser} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    Имя *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.first_name}\n                    onChange={(e) => setFormData({...formData, first_name: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\n                    required\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    Фамилия *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.last_name}\n                    onChange={(e) => setFormData({...formData, last_name: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\n                    required\n                  />\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Отчество\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.middle_name}\n                  onChange={(e) => setFormData({...formData, middle_name: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Email *\n                </label>\n                <input\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({...formData, email: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Роль *\n                </label>\n                <select\n                  value={formData.role}\n                  onChange={(e) => setFormData({...formData, role: e.target.value as 'admin' | 'hr' | 'user'})}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\n                  required\n                >\n                  <option value=\"user\">Пользователь</option>\n                  <option value=\"hr\">HR</option>\n                  <option value=\"admin\">Администратор</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Должность\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.position}\n                  onChange={(e) => setFormData({...formData, position: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Отдел\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.department}\n                  onChange={(e) => setFormData({...formData, department: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Mattermost username\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.mattermost_username}\n                  onChange={(e) => setFormData({...formData, mattermost_username: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white\"\n                  placeholder=\"@username\"\n                />\n              </div>\n              \n              <div className=\"flex justify-end space-x-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowCreateForm(false);\n                    setShowEditForm(false);\n                    setSelectedUser(null);\n                  }}\n                  className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n                >\n                  Отмена\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n                >\n                  {showCreateForm ? 'Создать' : 'Сохранить'}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminUsers; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}