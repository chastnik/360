{"ast":null,"code":"import React from'react';import{Navigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const PrivateRoute=_ref=>{let{children,requiredRole}=_ref;const{isAuthenticated,user,isLoading}=useAuth();// Показываем загрузку, пока проверяем авторизацию\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner w-8 h-8\"})});}// Если не авторизован, перенаправляем на логин\nif(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Если требуется определенная роль, проверяем её\nif(requiredRole&&(user===null||user===void 0?void 0:user.role)!==requiredRole){// Для админских страниц показываем 403\nif(requiredRole==='admin'){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-6xl font-bold text-red-500 mb-4\",children:\"403\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-gray-600 mb-8\",children:\"\\u0414\\u043E\\u0441\\u0442\\u0443\\u043F \\u0437\\u0430\\u043F\\u0440\\u0435\\u0449\\u0435\\u043D\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0442 \\u043F\\u0440\\u0430\\u0432 \\u0434\\u043B\\u044F \\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0430 \\u044D\\u0442\\u043E\\u0439 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u044B\"})]})});}// Для других ролей перенаправляем на дашборд\nreturn/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});}return/*#__PURE__*/_jsx(_Fragment,{children:children});};","map":{"version":3,"names":["React","Navigate","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PrivateRoute","_ref","children","requiredRole","isAuthenticated","user","isLoading","className","to","replace","role"],"sources":["/Users/chastnik/Documents/projects/360/frontend/src/components/PrivateRoute.tsx"],"sourcesContent":["import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface PrivateRouteProps {\n  children: React.ReactNode;\n  requiredRole?: 'admin' | 'manager' | 'user';\n}\n\nexport const PrivateRoute: React.FC<PrivateRouteProps> = ({ \n  children, \n  requiredRole \n}) => {\n  const { isAuthenticated, user, isLoading } = useAuth();\n\n  // Показываем загрузку, пока проверяем авторизацию\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"loading-spinner w-8 h-8\"></div>\n      </div>\n    );\n  }\n\n  // Если не авторизован, перенаправляем на логин\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  // Если требуется определенная роль, проверяем её\n  if (requiredRole && user?.role !== requiredRole) {\n    // Для админских страниц показываем 403\n    if (requiredRole === 'admin') {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center\">\n          <div className=\"text-center\">\n            <h1 className=\"text-6xl font-bold text-red-500 mb-4\">403</h1>\n            <p className=\"text-xl text-gray-600 mb-8\">Доступ запрещен</p>\n            <p className=\"text-gray-500\">У вас нет прав для просмотра этой страницы</p>\n          </div>\n        </div>\n      );\n    }\n    \n    // Для других ролей перенаправляем на дашборд\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n\n  return <>{children}</>;\n}; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,OAAO,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAOlD,MAAO,MAAM,CAAAC,YAAyC,CAAGC,IAAA,EAGnD,IAHoD,CACxDC,QAAQ,CACRC,YACF,CAAC,CAAAF,IAAA,CACC,KAAM,CAAEG,eAAe,CAAEC,IAAI,CAAEC,SAAU,CAAC,CAAGb,OAAO,CAAC,CAAC,CAEtD;AACA,GAAIa,SAAS,CAAE,CACb,mBACEX,IAAA,QAAKY,SAAS,CAAC,+CAA+C,CAAAL,QAAA,cAC5DP,IAAA,QAAKY,SAAS,CAAC,yBAAyB,CAAM,CAAC,CAC5C,CAAC,CAEV,CAEA;AACA,GAAI,CAACH,eAAe,CAAE,CACpB,mBAAOT,IAAA,CAACH,QAAQ,EAACgB,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CAEA;AACA,GAAIN,YAAY,EAAI,CAAAE,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEK,IAAI,IAAKP,YAAY,CAAE,CAC/C;AACA,GAAIA,YAAY,GAAK,OAAO,CAAE,CAC5B,mBACER,IAAA,QAAKY,SAAS,CAAC,+CAA+C,CAAAL,QAAA,cAC5DL,KAAA,QAAKU,SAAS,CAAC,aAAa,CAAAL,QAAA,eAC1BP,IAAA,OAAIY,SAAS,CAAC,sCAAsC,CAAAL,QAAA,CAAC,KAAG,CAAI,CAAC,cAC7DP,IAAA,MAAGY,SAAS,CAAC,4BAA4B,CAAAL,QAAA,CAAC,uFAAe,CAAG,CAAC,cAC7DP,IAAA,MAAGY,SAAS,CAAC,eAAe,CAAAL,QAAA,CAAC,2NAA0C,CAAG,CAAC,EACxE,CAAC,CACH,CAAC,CAEV,CAEA;AACA,mBAAOP,IAAA,CAACH,QAAQ,EAACgB,EAAE,CAAC,YAAY,CAACC,OAAO,MAAE,CAAC,CAC7C,CAEA,mBAAOd,IAAA,CAAAI,SAAA,EAAAG,QAAA,CAAGA,QAAQ,CAAG,CAAC,CACxB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}